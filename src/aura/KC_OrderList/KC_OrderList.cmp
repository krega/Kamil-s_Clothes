<aura:component description="KC_OrderList" implements="forceCommunity:availableForAllPageTypes" access="global" controller="KC_OrdersController">
        <aura:attribute name="allOrders" type="Object[]"/>
        <aura:attribute name="selectedOrder" type="Object"/>
         <aura:attribute name="showSupportForm"  type="Boolean"/>
        <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <aura:if isTrue="{!empty(v.allOrders)}">
        <lightning:card>
        <div class="slds-size_1-of-2 slds-container_center">
            <h1 class="slds-text-heading_medium slds-text-align--center">{!$Label.c.KC_ThereAreNoOrder}</h1>
            <lightning:button variant="brand" class="slds-align_absolute-center" label="{!$Label.c.KC_BackToHome}"
                              title="{!$Label.c.KC_BackToHomepage}" onclick="{!c.redirectToHome}"/>
            </div>
        </lightning:card>
    </aura:if>
    <aura:if isTrue="{!!empty(v.allOrders)}">
        <div class="slds-grid slds-gutters">
                <div class="slds-col">
                <lightning:card title="My Orders" class="slds-p-around--small">
                    <table class="slds-table slds-table--bordered">
                        <thead>
                        <tr>
                            <th scope="col"><span class="slds-truncate">{!$Label.c.KC_OrderNumber}</span></th>
                            <th scope="col"><span class="slds-truncate">{!$Label.c.KC_OrderAmount}</span></th>
                            <th scope="col"><span class="slds-truncate">{!$Label.c.KC_Status}</span></th>
                        </tr>
                        </thead>
                        <tbody>
                        <aura:iteration items="{!v.allOrders}" var="order" indexVar="index">
                            <tr onclick="{!c.showDetails}" data-index="{!index}">
                                <td>{!order.orderedUnit.OrderNumber}</td>
                                <td>
                                    <lightning:formattedNumber value="{!order.orderedUnit.TotalAmount}" style="currency"/>
                                </td>
                                <td>{!order.orderedUnit.Status}</td>
                            </tr>
                        </aura:iteration>
                        </tbody>
                    </table>
                </lightning:card>
            </div>
            <div class="slds-col">
                <aura:if isTrue="{!not(empty(v.selectedOrder))}">
                    <lightning:card title="Order details" class="slds-p-around--small">
                        <table class="slds-table slds-table--bordered">
                            <thead>
                            <tr>
                                <th scope="col"><span class="slds-truncate">{!$Label.c.KC_ProductName}</span></th>
                                <th scope="col"><span class="slds-truncate">{!$Label.c.KC_UnitPrice}</span></th>
                            </tr>
                            </thead>
                            <tbody>
                            <aura:iteration items="{!v.selectedOrder.orderItems}" var="orderItem" indexVar="index">

                                <tr>
                                    <td data-index="{!index}" onclick="{!c.redirectToDetailPage}">{!orderItem.Product2.Name}</td>
                                    <td>
                                        <lightning:formattedNumber value="{!orderItem.UnitPrice}" style="currency"/>
                                    </td>
                                </tr>

                            </aura:iteration>
                            </tbody>
                        </table>
                    </lightning:card>
                    <lightning:layout horizontalAlign="center" class="slds-m-bottom--large">
                        <p>{!$Label.c.KC_DoYouHaveAProblem}

                            <a href="" onclick="{!c.showSupportForm}"> {!$Label.c.KC_ContactUs}</a>
                        </p>
                    </lightning:layout>
                    <aura:if isTrue="{!v.showSupportForm}">
                        <hr class="slds-m-top--large slds-m-bottom--large"/>
                        <lightning:layout horizontalAlign="spread">
                            <c:KC_ComplainCase orderId="{!v.selectedOrder.orderedUnit.Id}" showForm="{!v.showSupportForm}"/>
                        </lightning:layout>
                    </aura:if>
                </aura:if>
            </div>
        </div>

    </aura:if>
    <c:KC_InfoToaster aura:id="toastCmp" />
    </aura:component>
